# WebShop å‰åç«¯è”è°ƒæŒ‡å—

**é¡¹ç›®ç»“æ„**ï¼š
- **åç«¯**ï¼šSpring Boot 3.5.7ï¼Œç«¯å£ `8080`
- **å‰ç«¯**ï¼šVue 3 + Viteï¼Œç«¯å£ `5173`

---

## ğŸ“‹ ç›®å½•

1. [ç¯å¢ƒå‡†å¤‡](#ç¯å¢ƒå‡†å¤‡)
2. [åç«¯é…ç½®](#åç«¯é…ç½®)
3. [å‰ç«¯é…ç½®](#å‰ç«¯é…ç½®)
4. [å¯åŠ¨æœåŠ¡](#å¯åŠ¨æœåŠ¡)
5. [è”è°ƒæµ‹è¯•](#è”è°ƒæµ‹è¯•)
6. [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)
7. [APIæ¥å£å¯¹æ¥](#apiæ¥å£å¯¹æ¥)

---

## ğŸ”§ ä¸€ã€ç¯å¢ƒå‡†å¤‡

### 1.1 æ£€æŸ¥ä¾èµ–

**åç«¯ä¾èµ–**ï¼š
- âœ… JDK 17+
- âœ… Maven 3.6+
- âœ… MySQL 8.0+
- âœ… æ•°æ®åº“å·²åˆå§‹åŒ–ï¼ˆæ‰§è¡Œ `database_init.sql`ï¼‰

**å‰ç«¯ä¾èµ–**ï¼š
- âœ… Node.js 16+
- âœ… npm æˆ– yarn

### 1.2 å®‰è£…å‰ç«¯ä¾èµ–

```bash
cd web-shop-frontend
npm install
# æˆ–
yarn install
```

---

## âš™ï¸ äºŒã€åç«¯é…ç½®

### 2.1 æ•°æ®åº“é…ç½®

**æ–‡ä»¶**ï¼š`web-shop-backend/src/main/resources/application.properties`

```properties
# æ•°æ®æºé…ç½®
spring.datasource.url=jdbc:mysql://localhost:3306/web_shop?useSSL=false&serverTimezone=Asia/Shanghai&characterEncoding=utf8
spring.datasource.username=root
spring.datasource.password=ä½ çš„æ•°æ®åº“å¯†ç 

# æœåŠ¡å™¨ç«¯å£
server.port=8080
```

### 2.2 è·¨åŸŸé…ç½®ï¼ˆå·²é…ç½®ï¼‰

**æ–‡ä»¶**ï¼š`web-shop-backend/src/main/java/org/javaweb/webshopbackend/config/CorsConfig.java`

```java
@Configuration
public class CorsConfig {
    @Bean
    public CorsFilter corsFilter() {
        CorsConfiguration config = new CorsConfiguration();
        
        // âœ… å…è®¸æ‰€æœ‰åŸŸåï¼ˆå¼€å‘ç¯å¢ƒï¼‰
        config.addAllowedOriginPattern("*");
        
        // âœ… å…è®¸æºå¸¦Cookie
        config.setAllowCredentials(true);
        
        // âœ… å…è®¸æ‰€æœ‰è¯·æ±‚æ–¹æ³•
        config.addAllowedMethod("*");
        
        // âœ… å…è®¸æ‰€æœ‰è¯·æ±‚å¤´
        config.addAllowedHeader("*");
        
        // âœ… æš´éœ²Authorizationå¤´
        config.addExposedHeader("Authorization");
        
        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();
        source.registerCorsConfiguration("/**", config);
        
        return new CorsFilter(source);
    }
}
```

**è¯´æ˜**ï¼š
- âœ… å·²é…ç½®ï¼Œæ— éœ€ä¿®æ”¹
- å…è®¸å‰ç«¯ `http://localhost:5173` è®¿é—®åç«¯ `http://localhost:8080`
- ç”Ÿäº§ç¯å¢ƒå»ºè®®é™åˆ¶ä¸ºå…·ä½“åŸŸå

### 2.3 JSONé…ç½®ï¼ˆå·²é…ç½®ï¼‰

**æ–‡ä»¶**ï¼š`application.properties`

```properties
# JSON é…ç½®
spring.jackson.date-format=yyyy-MM-dd HH:mm:ss
spring.jackson.time-zone=GMT+8
spring.jackson.default-property-inclusion=non_null
```

**è¯´æ˜**ï¼š
- âœ… æ—¥æœŸæ ¼å¼ç»Ÿä¸€ä¸º `yyyy-MM-dd HH:mm:ss`
- âœ… æ—¶åŒºè®¾ç½®ä¸º `GMT+8`ï¼ˆä¸­å›½æ—¶åŒºï¼‰

---

## ğŸ¨ ä¸‰ã€å‰ç«¯é…ç½®

### 3.1 ä¿®æ”¹ Vite ä»£ç†é…ç½® âš ï¸ é‡è¦

**æ–‡ä»¶**ï¼š`web-shop-frontend/vite.config.js`

**å½“å‰é…ç½®ï¼ˆé”™è¯¯ï¼‰**ï¼š
```javascript
proxy: {
  '/api': {
    target: 'http://localhost:3000',  // âŒ é”™è¯¯ï¼šåº”è¯¥æ˜¯8080
    changeOrigin: true,
    rewrite: (path) => path.replace(/^\/api/, '')
  }
}
```

**ä¿®æ”¹ä¸º**ï¼š
```javascript
server: {
  port: 5173,
  host: true,
  proxy: {
    '/api': {
      target: 'http://localhost:8080',  // âœ… ä¿®æ”¹ä¸ºåç«¯ç«¯å£
      changeOrigin: true,
      // âœ… ä¸é‡å†™è·¯å¾„ï¼Œå› ä¸ºåç«¯æ¥å£å°±æ˜¯ /api/xxx
      // rewrite: (path) => path.replace(/^\/api/, '')  // åˆ é™¤è¿™è¡Œ
    }
  }
}
```

**å®Œæ•´é…ç½®**ï¼š
```javascript
import { fileURLToPath, URL } from 'node:url'
import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'

export default defineConfig({
  plugins: [vue()],
  resolve: {
    alias: {
      '@': fileURLToPath(new URL('./src', import.meta.url))
    }
  },
  server: {
    port: 5173,
    host: true,
    proxy: {
      '/api': {
        target: 'http://localhost:8080',  // âœ… åç«¯åœ°å€
        changeOrigin: true,
        secure: false,  // å¦‚æœæ˜¯httpsï¼Œéœ€è¦è®¾ç½®ä¸ºfalse
        // ä¸é‡å†™è·¯å¾„ï¼Œå› ä¸ºåç«¯æ¥å£è·¯å¾„å°±æ˜¯ /api/xxx
      }
    }
  }
})
```

### 3.2 é…ç½®ç¯å¢ƒå˜é‡ï¼ˆå¯é€‰ï¼‰

**åˆ›å»ºæ–‡ä»¶**ï¼š`web-shop-frontend/.env.development`

```bash
# å¼€å‘ç¯å¢ƒAPIåœ°å€
VITE_API_BASE_URL=http://localhost:8080/api
```

**åˆ›å»ºæ–‡ä»¶**ï¼š`web-shop-frontend/.env.production`

```bash
# ç”Ÿäº§ç¯å¢ƒAPIåœ°å€
VITE_API_BASE_URL=https://api.yoursite.com/api
```

**è¯´æ˜**ï¼š
- å¦‚æœé…ç½®äº†ç¯å¢ƒå˜é‡ï¼Œ`request.js` ä¸­çš„ `baseURL` ä¼šä½¿ç”¨ç¯å¢ƒå˜é‡
- å¦‚æœä¸é…ç½®ï¼Œé»˜è®¤ä½¿ç”¨ `/api`ï¼ˆé€šè¿‡Viteä»£ç†è½¬å‘ï¼‰

### 3.3 å…³é—­ Mock æ•°æ® âš ï¸ é‡è¦

**æ–‡ä»¶**ï¼š`web-shop-frontend/src/api/user.js`ï¼ˆä»¥åŠå…¶ä»–APIæ–‡ä»¶ï¼‰

**å½“å‰é…ç½®**ï¼š
```javascript
const MOCK_ENABLED = true  // âŒ éœ€è¦æ”¹ä¸º false
```

**ä¿®æ”¹ä¸º**ï¼š
```javascript
const MOCK_ENABLED = false  // âœ… å…³é—­Mockï¼Œä½¿ç”¨çœŸå®API
```

**éœ€è¦ä¿®æ”¹çš„æ–‡ä»¶**ï¼š
- `src/api/user.js`
- `src/api/product.js`
- `src/api/cart.js`
- `src/api/order.js`
- `src/api/address.js`
- `src/api/category.js`
- `src/api/statistics.js`

**æˆ–è€…æ‰¹é‡æ›¿æ¢**ï¼š
```bash
# åœ¨ web-shop-frontend ç›®å½•ä¸‹æ‰§è¡Œ
# Windows PowerShell
Get-ChildItem -Path src/api -Filter *.js -Recurse | ForEach-Object {
    (Get-Content $_.FullName) -replace 'const MOCK_ENABLED = true', 'const MOCK_ENABLED = false' | Set-Content $_.FullName
}

# Linux/Mac
find src/api -name "*.js" -type f -exec sed -i 's/const MOCK_ENABLED = true/const MOCK_ENABLED = false/g' {} +
```

### 3.4 æ£€æŸ¥è¯·æ±‚æ‹¦æˆªå™¨

**æ–‡ä»¶**ï¼š`web-shop-frontend/src/utils/request.js`

**å½“å‰é…ç½®**ï¼ˆå·²æ­£ç¡®ï¼‰ï¼š
```javascript
const request = axios.create({
  baseURL: import.meta.env.VITE_API_BASE_URL || '/api',  // âœ… ä½¿ç”¨ä»£ç†æˆ–ç¯å¢ƒå˜é‡
  timeout: 15000,
  headers: {
    'Content-Type': 'application/json;charset=UTF-8'
  }
})

// è¯·æ±‚æ‹¦æˆªå™¨ï¼šè‡ªåŠ¨æ·»åŠ Token
request.interceptors.request.use(
  config => {
    const token = getToken()
    if (token) {
      config.headers['Authorization'] = `Bearer ${token}`  // âœ… æ·»åŠ Token
    }
    return config
  }
)

// å“åº”æ‹¦æˆªå™¨ï¼šç»Ÿä¸€å¤„ç†å“åº”
request.interceptors.response.use(
  response => {
    const res = response.data
    // âœ… åç«¯è¿”å›æ ¼å¼ï¼š{ code: 200, data: {...}, message: 'success' }
    if (res.code === 200 || res.code === 0) {
      return res.data  // âœ… è¿”å›dataå­—æ®µ
    } else {
      ElMessage.error(res.message || 'è¯·æ±‚å¤±è´¥')
      return Promise.reject(new Error(res.message || 'è¯·æ±‚å¤±è´¥'))
    }
  }
)
```

**è¯´æ˜**ï¼š
- âœ… å·²æ­£ç¡®é…ç½®ï¼Œæ— éœ€ä¿®æ”¹
- è‡ªåŠ¨æ·»åŠ  `Authorization: Bearer {token}` å¤´
- ç»Ÿä¸€å¤„ç†å“åº”æ ¼å¼

---

## ğŸš€ å››ã€å¯åŠ¨æœåŠ¡

### 4.1 å¯åŠ¨åç«¯

```bash
# æ–¹å¼1ï¼šä½¿ç”¨Maven
cd web-shop-backend
mvn spring-boot:run

# æ–¹å¼2ï¼šä½¿ç”¨IDEï¼ˆæ¨èï¼‰
# è¿è¡Œ WebShopBackendApplication.java

# æ–¹å¼3ï¼šæ‰“åŒ…åè¿è¡Œ
mvn clean package
java -jar target/web-shop-backend-1.0.0.jar
```

**éªŒè¯åç«¯å¯åŠ¨**ï¼š
```bash
# è®¿é—®APIæ–‡æ¡£
http://localhost:8080/doc.html

# æµ‹è¯•æ¥å£
curl http://localhost:8080/api/user/list
```

### 4.2 å¯åŠ¨å‰ç«¯

```bash
cd web-shop-frontend
npm run dev
# æˆ–
yarn dev
```

**éªŒè¯å‰ç«¯å¯åŠ¨**ï¼š
- æµè§ˆå™¨è®¿é—®ï¼š`http://localhost:5173`
- æ§åˆ¶å°åº”è¯¥æ²¡æœ‰CORSé”™è¯¯

---

## ğŸ§ª äº”ã€è”è°ƒæµ‹è¯•

### 5.1 æµ‹è¯•ç™»å½•æ¥å£

**å‰ç«¯è°ƒç”¨**ï¼š
```javascript
// src/api/user.js
export function login(data) {
  return request({
    url: '/user/login',  // å®é™…è¯·æ±‚ï¼šhttp://localhost:8080/api/user/login
    method: 'post',
    data
  })
}
```

**è¯·æ±‚æµç¨‹**ï¼š
```
1. å‰ç«¯ï¼šhttp://localhost:5173
   â†“
2. å‘èµ·è¯·æ±‚ï¼š/api/user/login
   â†“
3. Viteä»£ç†ï¼šè½¬å‘åˆ° http://localhost:8080/api/user/login
   â†“
4. åç«¯å¤„ç†ï¼šUserController.login()
   â†“
5. è¿”å›å“åº”ï¼š{ code: 200, data: {...}, message: 'ç™»å½•æˆåŠŸ' }
   â†“
6. å‰ç«¯å“åº”æ‹¦æˆªå™¨ï¼šæå– data å­—æ®µè¿”å›
```

**æµ‹è¯•æ­¥éª¤**ï¼š
1. æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼ˆF12ï¼‰
2. åˆ‡æ¢åˆ° Network æ ‡ç­¾
3. åœ¨å‰ç«¯é¡µé¢ç™»å½•
4. æŸ¥çœ‹è¯·æ±‚ï¼š
   - **Request URL**: `http://localhost:5173/api/user/login`
   - **å®é™…è¯·æ±‚**: `http://localhost:8080/api/user/login`ï¼ˆé€šè¿‡ä»£ç†ï¼‰
   - **Response**: `{ code: 200, data: {...}, message: 'ç™»å½•æˆåŠŸ' }`

### 5.2 æµ‹è¯•å…¶ä»–æ¥å£

**å•†å“åˆ—è¡¨**ï¼š
```javascript
// å‰ç«¯è°ƒç”¨
GET /api/product/list?pageNum=1&pageSize=10

// åç«¯æ¥å£
GET http://localhost:8080/api/product/list?pageNum=1&pageSize=10
```

**åˆ›å»ºè®¢å•**ï¼š
```javascript
// å‰ç«¯è°ƒç”¨
POST /api/orders
Body: { userId: 1, addressId: 1, cartItemIds: [1, 2], note: 'è¯·å°½å¿«å‘è´§' }

// åç«¯æ¥å£
POST http://localhost:8080/api/orders
```

### 5.3 æ£€æŸ¥Tokenä¼ é€’

**ç™»å½•åè·å–Token**ï¼š
```javascript
// ç™»å½•æˆåŠŸåï¼ŒTokenä¼šä¿å­˜åœ¨localStorage
localStorage.getItem('user_token')  // æŸ¥çœ‹Token
```

**åç»­è¯·æ±‚è‡ªåŠ¨æºå¸¦Token**ï¼š
```javascript
// request.js è¯·æ±‚æ‹¦æˆªå™¨ä¼šè‡ªåŠ¨æ·»åŠ 
headers: {
  'Authorization': 'Bearer mock_token_test_1234567890'
}
```

**åç«¯éªŒè¯Token**ï¼ˆå¦‚æœå·²å®ç°JWTï¼‰ï¼š
```java
// ä»è¯·æ±‚å¤´è·å–Token
String token = request.getHeader("Authorization");
// token = "Bearer mock_token_test_1234567890"
```

---

## â— å…­ã€å¸¸è§é—®é¢˜

### 6.1 CORSè·¨åŸŸé”™è¯¯

**é”™è¯¯ä¿¡æ¯**ï¼š
```
Access to XMLHttpRequest at 'http://localhost:8080/api/user/login' 
from origin 'http://localhost:5173' has been blocked by CORS policy
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. âœ… æ£€æŸ¥åç«¯ `CorsConfig.java` æ˜¯å¦å·²é…ç½®
2. âœ… æ£€æŸ¥åç«¯æ˜¯å¦å¯åŠ¨åœ¨ `8080` ç«¯å£
3. âœ… æ£€æŸ¥å‰ç«¯ä»£ç†é…ç½®æ˜¯å¦æ­£ç¡®

### 6.2 404 Not Found

**é”™è¯¯ä¿¡æ¯**ï¼š
```
GET http://localhost:5173/api/user/login 404 (Not Found)
```

**å¯èƒ½åŸå› **ï¼š
1. âŒ åç«¯æœªå¯åŠ¨
2. âŒ åç«¯ç«¯å£ä¸æ˜¯ `8080`
3. âŒ Viteä»£ç†é…ç½®é”™è¯¯ï¼ˆtargetä¸æ˜¯8080ï¼‰

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# 1. æ£€æŸ¥åç«¯æ˜¯å¦å¯åŠ¨
curl http://localhost:8080/api/user/list

# 2. æ£€æŸ¥Viteé…ç½®
# vite.config.js ä¸­çš„ target åº”è¯¥æ˜¯ 'http://localhost:8080'
```

### 6.3 è¯·æ±‚è¢«ä»£ç†ä½†è¿”å›404

**ç°è±¡**ï¼š
- è¯·æ±‚URLæ˜¾ç¤º `http://localhost:5173/api/user/login`
- ä½†å®é™…è¯·æ±‚åˆ°äº†åç«¯ï¼Œè¿”å›404

**å¯èƒ½åŸå› **ï¼š
- âŒ Viteä»£ç†é…ç½®äº† `rewrite`ï¼Œå¯¼è‡´è·¯å¾„è¢«é‡å†™
- âŒ åç«¯æ¥å£è·¯å¾„ä¸åŒ¹é…

**è§£å†³æ–¹æ¡ˆ**ï¼š
```javascript
// vite.config.js
proxy: {
  '/api': {
    target: 'http://localhost:8080',
    changeOrigin: true,
    // âŒ åˆ é™¤è¿™è¡Œï¼šrewrite: (path) => path.replace(/^\/api/, '')
    // å› ä¸ºåç«¯æ¥å£è·¯å¾„å°±æ˜¯ /api/xxx
  }
}
```

### 6.4 å“åº”æ ¼å¼ä¸åŒ¹é…

**é”™è¯¯ä¿¡æ¯**ï¼š
```
Cannot read property 'xxx' of undefined
```

**å¯èƒ½åŸå› **ï¼š
- åç«¯è¿”å›æ ¼å¼ä¸å‰ç«¯æœŸæœ›ä¸ä¸€è‡´

**åç«¯è¿”å›æ ¼å¼**ï¼ˆæ ‡å‡†ï¼‰ï¼š
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "userId": 1,
    "username": "test"
  }
}
```

**å‰ç«¯å¤„ç†**ï¼ˆrequest.jsï¼‰ï¼š
```javascript
if (res.code === 200 || res.code === 0) {
  return res.data  // âœ… è¿”å›dataå­—æ®µ
}
```

**æ£€æŸ¥æ–¹æ³•**ï¼š
1. æ‰“å¼€æµè§ˆå™¨ Network æ ‡ç­¾
2. æŸ¥çœ‹ Response å†…å®¹
3. ç¡®è®¤æ ¼å¼æ˜¯å¦ä¸º `{ code, message, data }`

### 6.5 Tokenæœªä¼ é€’

**ç°è±¡**ï¼š
- ç™»å½•æˆåŠŸï¼Œä½†åç»­è¯·æ±‚è¿”å›401

**æ£€æŸ¥æ­¥éª¤**ï¼š
1. æŸ¥çœ‹ localStorage æ˜¯å¦æœ‰ token
2. æŸ¥çœ‹è¯·æ±‚å¤´æ˜¯å¦æœ‰ `Authorization`
3. æ£€æŸ¥ `request.js` è¯·æ±‚æ‹¦æˆªå™¨

**è§£å†³æ–¹æ¡ˆ**ï¼š
```javascript
// request.js
request.interceptors.request.use(
  config => {
    const token = getToken()  // âœ… ä»localStorageè·å–
    if (token) {
      config.headers['Authorization'] = `Bearer ${token}`  // âœ… æ·»åŠ Token
    }
    return config
  }
)
```

### 6.6 Mockæ•°æ®å¹²æ‰°

**ç°è±¡**ï¼š
- å‰ç«¯ä¸€ç›´ä½¿ç”¨Mockæ•°æ®ï¼Œä¸è°ƒç”¨çœŸå®API

**è§£å†³æ–¹æ¡ˆ**ï¼š
```javascript
// æ‰€æœ‰APIæ–‡ä»¶ä¸­çš„ MOCK_ENABLED æ”¹ä¸º false
const MOCK_ENABLED = false  // âœ… å…³é—­Mock
```

---

## ğŸ“¡ ä¸ƒã€APIæ¥å£å¯¹æ¥

### 7.1 æ¥å£è·¯å¾„å¯¹ç…§è¡¨

| åŠŸèƒ½ | å‰ç«¯è°ƒç”¨ | åç«¯æ¥å£ | æ–¹æ³• |
|------|---------|---------|------|
| ç”¨æˆ·ç™»å½• | `/api/user/login` | `POST /api/user/login` | POST |
| ç”¨æˆ·æ³¨å†Œ | `/api/user/register` | `POST /api/user/register` | POST |
| è·å–ç”¨æˆ·ä¿¡æ¯ | `/api/user/info/{userId}` | `GET /api/user/info/{userId}` | GET |
| æ›´æ–°ç”¨æˆ·ä¿¡æ¯ | `/api/user/{userId}` | `PUT /api/user/{userId}` | PUT |
| ä¿®æ”¹å¯†ç  | `/api/user/{userId}/password` | `PUT /api/user/{userId}/password` | PUT |
| å•†å“åˆ—è¡¨ | `/api/product/list` | `GET /api/product/list` | GET |
| å•†å“è¯¦æƒ… | `/api/product/{productId}` | `GET /api/product/{productId}` | GET |
| è´­ç‰©è½¦åˆ—è¡¨ | `/api/cart/{userId}` | `GET /api/cart/{userId}` | GET |
| æ·»åŠ è´­ç‰©è½¦ | `/api/cart` | `POST /api/cart` | POST |
| åˆ›å»ºè®¢å• | `/api/orders` | `POST /api/orders` | POST |
| è®¢å•åˆ—è¡¨ | `/api/orders/user/{userId}` | `GET /api/orders/user/{userId}` | GET |
| æ”¯ä»˜è®¢å• | `/api/orders/{orderNo}/pay` | `PUT /api/orders/{orderNo}/pay` | PUT |

### 7.2 è¯·æ±‚ç¤ºä¾‹

**ç™»å½•è¯·æ±‚**ï¼š
```javascript
// å‰ç«¯ä»£ç 
import { login } from '@/api/user'

const loginData = {
  username: 'test',
  password: '123456'
}

const result = await login(loginData)
// result = { userId: 1, username: 'test', token: '...' }
```

**åç«¯æ¥æ”¶**ï¼š
```java
@PostMapping("/login")
public Result<Map<String, Object>> login(@Valid @RequestBody LoginDTO loginDTO) {
    User user = userService.login(loginDTO.getUsername(), loginDTO.getPassword());
    
    Map<String, Object> data = new HashMap<>();
    data.put("userId", user.getId());
    data.put("username", user.getUsername());
    data.put("token", "mock-token-" + user.getId());
    
    return Result.success("ç™»å½•æˆåŠŸ", data);
}
```

### 7.3 å“åº”æ ¼å¼ç»Ÿä¸€

**åç«¯ç»Ÿä¸€å“åº”æ ¼å¼**ï¼š
```java
public class Result<T> {
    private Integer code;      // 200=æˆåŠŸï¼Œå…¶ä»–=å¤±è´¥
    private String message;     // æç¤ºä¿¡æ¯
    private T data;            // æ•°æ®
}
```

**å‰ç«¯ç»Ÿä¸€å¤„ç†**ï¼š
```javascript
// request.js å“åº”æ‹¦æˆªå™¨
if (res.code === 200 || res.code === 0) {
  return res.data  // âœ… ç›´æ¥è¿”å›dataå­—æ®µ
} else {
  ElMessage.error(res.message || 'è¯·æ±‚å¤±è´¥')
  return Promise.reject(new Error(res.message || 'è¯·æ±‚å¤±è´¥'))
}
```

---

## ğŸ” å…«ã€è°ƒè¯•æŠ€å·§

### 8.1 ä½¿ç”¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·

**Network æ ‡ç­¾**ï¼š
1. æ‰“å¼€å¼€å‘è€…å·¥å…·ï¼ˆF12ï¼‰
2. åˆ‡æ¢åˆ° Network æ ‡ç­¾
3. å‹¾é€‰ "Preserve log"ï¼ˆä¿ç•™æ—¥å¿—ï¼‰
4. æ‰§è¡Œæ“ä½œï¼ˆç™»å½•ã€æŸ¥è¯¢ç­‰ï¼‰
5. æŸ¥çœ‹è¯·æ±‚è¯¦æƒ…ï¼š
   - **Request URL**: å®é™…è¯·æ±‚åœ°å€
   - **Request Headers**: è¯·æ±‚å¤´ï¼ˆåŒ…å«Tokenï¼‰
   - **Request Payload**: è¯·æ±‚ä½“
   - **Response**: å“åº”å†…å®¹

### 8.2 ä½¿ç”¨Postmanæµ‹è¯•åç«¯

**æ­¥éª¤**ï¼š
1. æ‰“å¼€ Postman
2. åˆ›å»ºæ–°è¯·æ±‚
3. è®¾ç½®URLï¼š`http://localhost:8080/api/user/login`
4. è®¾ç½®Methodï¼šPOST
5. è®¾ç½®Bodyï¼ˆJSONï¼‰ï¼š
   ```json
   {
     "username": "test",
     "password": "123456"
   }
   ```
6. å‘é€è¯·æ±‚
7. æŸ¥çœ‹å“åº”

**ä¼˜åŠ¿**ï¼š
- ç›´æ¥æµ‹è¯•åç«¯ï¼Œæ’é™¤å‰ç«¯é—®é¢˜
- å¯ä»¥æµ‹è¯•æ‰€æœ‰æ¥å£
- æ–¹ä¾¿è°ƒè¯•å’Œæ–‡æ¡£ç¼–å†™

### 8.3 æŸ¥çœ‹åç«¯æ—¥å¿—

**åç«¯æ§åˆ¶å°è¾“å‡º**ï¼š
```
2025-11-06 20:00:00 [http-nio-8080-exec-1] INFO  UserController - ç”¨æˆ·ç™»å½•ï¼šusername=test
2025-11-06 20:00:00 [http-nio-8080-exec-1] DEBUG UserService - æŸ¥è¯¢ç”¨æˆ·ï¼šusername=test
2025-11-06 20:00:00 [http-nio-8080-exec-1] INFO  UserController - ç™»å½•æˆåŠŸ
```

**æŸ¥çœ‹SQLæ—¥å¿—**ï¼š
```properties
# application.properties
mybatis-plus.configuration.log-impl=org.apache.ibatis.logging.stdout.StdOutImpl
```

---

## âœ… ä¹ã€è”è°ƒæ£€æŸ¥æ¸…å•

### å¯åŠ¨å‰æ£€æŸ¥
- [ ] åç«¯æ•°æ®åº“å·²é…ç½®å¹¶åˆå§‹åŒ–
- [ ] åç«¯ç«¯å£ä¸º `8080`
- [ ] å‰ç«¯Viteä»£ç†targetä¸º `http://localhost:8080`
- [ ] å‰ç«¯Mockå·²å…³é—­ï¼ˆ`MOCK_ENABLED = false`ï¼‰
- [ ] å‰ç«¯ä¾èµ–å·²å®‰è£…ï¼ˆ`npm install`ï¼‰

### å¯åŠ¨åæ£€æŸ¥
- [ ] åç«¯å¯åŠ¨æˆåŠŸï¼ˆè®¿é—® `http://localhost:8080/doc.html`ï¼‰
- [ ] å‰ç«¯å¯åŠ¨æˆåŠŸï¼ˆè®¿é—® `http://localhost:5173`ï¼‰
- [ ] æµè§ˆå™¨æ§åˆ¶å°æ— CORSé”™è¯¯
- [ ] Networkæ ‡ç­¾å¯ä»¥çœ‹åˆ°APIè¯·æ±‚

### åŠŸèƒ½æµ‹è¯•
- [ ] ç™»å½•æ¥å£æ­£å¸¸
- [ ] Tokenæ­£ç¡®ä¼ é€’
- [ ] å•†å“åˆ—è¡¨æ­£å¸¸
- [ ] è´­ç‰©è½¦åŠŸèƒ½æ­£å¸¸
- [ ] è®¢å•åˆ›å»ºæ­£å¸¸

---

## ğŸ“ åã€å¿«é€Ÿæ’é”™æµç¨‹

```
1. æ£€æŸ¥åç«¯æ˜¯å¦å¯åŠ¨
   â†“
2. æ£€æŸ¥å‰ç«¯ä»£ç†é…ç½®ï¼ˆtargetæ˜¯å¦ä¸º8080ï¼‰
   â†“
3. æ£€æŸ¥Mockæ˜¯å¦å…³é—­
   â†“
4. æŸ¥çœ‹æµè§ˆå™¨Networkæ ‡ç­¾
   â†“
5. æŸ¥çœ‹åç«¯æ§åˆ¶å°æ—¥å¿—
   â†“
6. ä½¿ç”¨Postmanç›´æ¥æµ‹è¯•åç«¯
```

---

## ğŸ¯ æ€»ç»“

**å…³é”®é…ç½®**ï¼š
1. âœ… åç«¯è·¨åŸŸå·²é…ç½®ï¼ˆ`CorsConfig.java`ï¼‰
2. âš ï¸ å‰ç«¯Viteä»£ç†éœ€è¦ä¿®æ”¹ï¼ˆtargetæ”¹ä¸º8080ï¼‰
3. âš ï¸ å‰ç«¯Mockéœ€è¦å…³é—­ï¼ˆ`MOCK_ENABLED = false`ï¼‰

**è¯·æ±‚æµç¨‹**ï¼š
```
å‰ç«¯ (5173) â†’ Viteä»£ç† â†’ åç«¯ (8080) â†’ æ•°æ®åº“
```

**ä¸‹ä¸€æ­¥**ï¼š
1. ä¿®æ”¹ `vite.config.js` ä¸­çš„ä»£ç†target
2. å…³é—­æ‰€æœ‰APIæ–‡ä»¶çš„Mock
3. é‡å¯å‰ç«¯æœåŠ¡
4. å¼€å§‹è”è°ƒæµ‹è¯•

---

**å¦‚æœ‰é—®é¢˜ï¼Œè¯·å‚è€ƒ**ï¼š
- åç«¯APIæ–‡æ¡£ï¼š`http://localhost:8080/doc.html`
- åç«¯æ—¥å¿—ï¼šæ§åˆ¶å°è¾“å‡º
- å‰ç«¯æ—¥å¿—ï¼šæµè§ˆå™¨æ§åˆ¶å° + Networkæ ‡ç­¾

